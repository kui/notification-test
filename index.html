<p>デスクトップ通知デモンストレーション。</p>

<button id="test-noti">デスクトップ通知するよ</button>
<button id="delay-test-noti">5秒後にデスクトップ通知するよ</button>

<script>
var Delay = 5 * 1000; // msec

function main() {
  Notification.requestPermission();

  document.querySelector('#test-noti')
    .addEventListener('click', notify);

  document.querySelector('#delay-test-noti')
    .addEventListener('click', function() {
      setTimeout(notify, Delay);
      console.log('%d 秒後に通知します', Delay);
    });
}

function notify() {
  console.log('通知します')

  if (Notification.permission === 'granted') {
    new Notification('通知テストですよ', {body: 'てすてす'});
    console.log('通知しました')
  } else {
    console.error('通知が許可されていません (permission: %s)', Notification.permission);
  }
};

document.addEventListener('DOMContentLoaded', main);
</script>
